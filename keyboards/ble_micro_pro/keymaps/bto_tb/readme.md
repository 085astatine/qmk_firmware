# Sample for ble_micro_pro with B.T.O trackball module

BLE Micro Proでビット・トレード・ワンのトラックボールモジュールを使うサンプルコードです

## ハードウェア
BLE Micro Proのレギュレータ(U2)を2.85Vのものに取り替えて動作確認しています

## 通信方式
基本はSPIです。paw3204.cのspi_paw3204に指定する関数で2種類の配線から選択します

- 回路による半二重方式
    - SPIのMOSIとMISOを抵抗で接続して半二重方式で通信します
    - 通信に使うピンはconfig.hに`CONFIG_(MOSI|MISO|SCK)_PIN`でそれぞれ指定してください。デフォルトはPro Microと同じ位置です
    - 電源供給に使うピンは`PAW3204_POWER`で指定してください。デフォルトは7番ピンです

    ```
    ____________             _________
           MOSI |---+        |
                |  10k       |
    BMP    MISO |---+--------| SDIO
                |            |
           SCLK |------------| SCLK
                |            |
           GPIO |------------| VCC
                |            |
           GND  |------------| GND
    ____________|            |________
    ```

- ソフトによる半二重方式
    - SPIのMOSIとMISOを適宜切り替えて通信します
    - 通信に使うピンはconfig.hに`PAW3204_(SCLK|DATA)`でそれぞれ指定してください
        - いまのところDATAには5, 6番ピンを指定すると動きません。次のブートローダのアップデートで解決予定

    ```
    ____________             _________
                |            |
    BMP    DATA |------------| SDIO
                |            |
           SCLK |------------| SCLK
                |            |
           GPIO |------------| VCC
                |            |
            GND |------------| GND
    ____________|            |________
    ```

